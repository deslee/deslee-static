<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><title>Static blog using React and Flux</title><base href="../"><link href='https://fonts.googleapis.com/css?family=Roboto+Slab:300|Open+Sans:300|Source+Code+Pro' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><meta name="description" content="I have enjoyed the simplicity of static blog generators in the past, but I have always loved creating my personal"><meta name="og:description" content="I have enjoyed the simplicity of static blog generators in the past, but I have always loved creating my personal"><meta name="author" content="Desmond Lee"><meta name="og:image" content="https://deslee.me/assets/face.jpg"><meta name="og:url" content="http://deslee.me"><meta name="og:title" content="Static blog using React and Flux"><meta name="og:site_name" content="Desmond Lee"><meta name="og:type" content="website"></head><body class="container flex flex-column"><div class="clearfix flex-grow"><header class="px2 col col-12 md-col-3 center md-left"><a href=""><img src="https://deslee.me/assets/face.jpg" style="height:9em;width:9em" class="header-logo circle block"></a><h1>Desmond Lee</h1><nav><ul class="col-12 p0 list-reset inline-block clearfix blue"><li class="py1 pl0 pr0 md-no-hover-box-shadow md-no-active-box-shadow block col-12 btn btn-outline not-rounded y-group-item regular white main-nav-item"><a href="" class="block">Home</a></li><li class="py1 pl0 pr0 md-no-hover-box-shadow md-no-active-box-shadow block col-12 btn btn-outline not-rounded y-group-item regular white main-nav-item"><a href="about" class="block">About</a></li><li class="py1 pl0 pr0 md-no-hover-box-shadow md-no-active-box-shadow block col-12 btn btn-outline not-rounded y-group-item regular white main-nav-item"><a href="archive" class="block">Archive</a></li></ul></nav><p>I'm a Software Engineer from Dallas. This is my website and blog.</p></header><main role="main" class="px2 col col-12 md-col-9 lg-col-6"><h1>Static blog using React and Flux</h1><time datetime="2014-11-21">2014-11-21  </time><ul class="p0 inline"><li class="inline"><a href="tag/react" class="silver navy bg-darken-1 px1 mr1 rounded">react</a></li><li class="inline"><a href="tag/dev" class="silver navy bg-darken-1 px1 mr1 rounded">dev</a></li></ul><div class="mt1"><p class="mt1"><p>I have enjoyed the simplicity of static blog generators in the past, but I have always loved creating my personal website with front-end technologies that I love. However, I always felt restricted by the framework (Jekyll) and by having to maintain the back-end (express, flask, django). </p>
<p>Today, I started to remake my website again, using React. However, this time, the website will be static. I wanted this because the back-end for my site has been shrinking more and more as I started using front-end technologies like AngularJS and React, and at this point all I need is a file server.</p>
<p>I placed the content of my site, both pages and blog posts, under the <code>assets/posts</code> directory:</p>
<pre><code>- assets
  - posts
    - about.md
    - projects.md
    - flux-static-blog.md
</code></pre><p>The markdown/yaml format for a <code>post</code> looks like this:</p>
<pre><code>---
Title: Projects
Page: true
---

## Android apps
.....
</code></pre><p>In my GulpFile, I have task that processes all the markdown code in the <code>assets/posts</code> directory into html and metadata and serializes it into a JSON string:</p>
<pre><code>var files = fs.readdirSync(&#39;./app/assets/posts&#39;);
var list = files.map(function(e) {
  var content = fs.readFileSync(&#39;./app/assets/posts/&#39; + e, {encoding: &#39;utf8&#39;});
  var markdown = marked(content);

  markdown.meta.slug = e.split(&#39;.md&#39;)[0];
  return markdown;
});
build_options.json = JSON.stringify(list);
</code></pre><p>Then I inject that JSON string into my main file:</p>
<pre><code>&lt;script&gt;
  window[&#39;app_initial_data&#39;] = &lt;!-- @echo json --&gt;
&lt;/script&gt;
</code></pre><p>Of course, this isn&#39;t scalable when there is tons of data, so I have the ability to asynchronously inject posts into my app on the front-end:</p>
<pre><code>app_initial_data.forEach(function(post) {
  actions.receivedPost(post);
});
</code></pre><p>Eventually, as it becomes necessary, I can use AJAX to dynamically inject posts into my app as it requests them. There are multiple ways of going about doing this. I could write a REST app that serves JSON to my front-end app, but then my front-end becomes coupled to a server implementing that API. </p>
<p>Another option would be to serialize &quot;chunks&quot; of post data into multiple JSON files, <code>posts-1.json, posts-2.json, etc</code>, and make standard ajax calls to the JSON files as needed by convention. </p>
<p>This has the advantage of being automatically cached by a good static HTTP server, as well as retaining the ability to host the static site anywhere that allows static file hosting (such as github pages, dropbox, etc).</p>
</p></div></main><section class="col col-12 lg-col-3"><hr class="lg-hide"><div class="px2 col col-12 md-col-4 lg-col-12"><h3>Friends</h3><ul class="p0 list-reset"><li><a href="http://elizabethdelrosario.com/">Elizabeth Del Rosario</a></li><li><a href="http://spencer-hawkins.com/">Spencer Hawkins</a></li></ul></div><div class="px2 col col-12 md-col-4 lg-col-12"><h3>Contact me</h3><form><label for="email">Your Email</label><input id="email" name="email" type="email" class="block field col-12"><label for="message">Message</label><textarea id="message" name="message" class="block field col-12"></textarea><input type="submit" class="btn btn-primary mt1"></form></div></section></div><footer class="gray left-align p2"><section>Desmond Lee Â© 2015</section></footer><script src="https://code.jquery.com/jquery-1.11.3.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script><script>
  $(document).ready(function(){
  // Target your .container, .wrapper, .post, etc.
  $("main[role='main']").fitVids();
  });
</script></body></html>